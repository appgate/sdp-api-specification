client-connections:
  get:
    summary: View Client Connection settings.
    description: View Client Connection settings.
    tags:
      - Client Connections
    parameters:
      - $ref: 'common.yml#/parameters/authorization'
    responses:
      200:
        $ref: '#/responses/ClientConnections'
      401:
        $ref: 'common.yml#/responses/TokenError'
      403:
        $ref: 'common.yml#/responses/PermissionError'
      500:
        $ref: 'common.yml#/responses/UnexpectedError'
  delete:
    summary: Reset Client Connections to the default settings.
    description: Reset Client Connections to the default settings.
    tags:
      - Client Connections
    parameters:
      - $ref: 'common.yml#/parameters/authorization'
    responses:
      204:
        description: Client Connection settings were reset successfully.
      401:
        $ref: 'common.yml#/responses/TokenError'
      403:
        $ref: 'common.yml#/responses/PermissionError'
      500:
        $ref: 'common.yml#/responses/UnexpectedError'
  put:
    summary: Update Client Connection settings.
    description: Update Client Connection settings.
    tags:
      - Client Connections
    parameters:
      - $ref: 'common.yml#/parameters/authorization'
    responses:
      200:
        $ref: '#/responses/ClientConnections'
      400:
        $ref: 'common.yml#/responses/JsonError'
      401:
        $ref: 'common.yml#/responses/TokenError'
      403:
        $ref: 'common.yml#/responses/PermissionError'
      422:
        $ref: 'common.yml#/responses/ValidationError'
      500:
        $ref: 'common.yml#/responses/UnexpectedError'
    requestBody:
      content:
        application/json:
          schema:
            $ref: '#/definitions/ClientConnections'
      description: Client Connection settings.
      required: true
client-connections-barcode:
  get:
    summary: Get QR code for connection URL.
    description: Get QR code for connection URL.
    tags:
      - Client Connections
    parameters:
      - $ref: 'common.yml#/parameters/authorization'
      - name: keyName
        in: path
        description: Name of the SPA key.
        required: true
        schema:
          type: string
          example: test_key
    responses:
      200:
        description: QR code for the given SPA key.
        content:
          application/json:
            schema:
              properties:
                barcode:
                  type: string
                  format: byte
                  description: The QR code image in JPG format, in base64 format.
      401:
        $ref: 'common.yml#/responses/TokenError'
      403:
        $ref: 'common.yml#/responses/PermissionError'
      404:
        $ref: 'common.yml#/responses/NotFoundError'
      500:
        $ref: 'common.yml#/responses/UnexpectedError'

responses:
  ClientConnections:
    content:
      application/json:
        schema:
          $ref: '#/definitions/ClientConnections'
    description: Client Connection settings.

definitions:
  ClientConnections:
    type: object
    properties:
      mode:
        type: string
        default: TCP
        description: SPA mode.
        enum:
          - Disabled
          - TCP
          - 'UDP-TCP'
      keys:
        type: array
        description: SPA keys.
        items:
          type: object
          required:
            - name
          properties:
            name:
              type: string
              description: A name to identify the SPA key.
              example: test_key
            url:
              type: string
              readOnly: true
              description: >-
                The URL generated for the SPA key and name.
                The URL includes the SPA key for the Client to use and also the CA certificates's thumbprint for the
                Client to trust.
              example: ->
                appgate://appgate.company.com/eyJjYUZpbmdlcnByaW50IjoiMTcwZDQzOTE2YTliZGQ2MGI2NjlmOThmODI0YmU5YjkyM3434
